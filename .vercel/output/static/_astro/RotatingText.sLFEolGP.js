import{j as R}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.RH_Wq4ov.js";import{M as X,i as _,u as U,P as q,a as J,b as Q,L as Y,m as B}from"./proxy.auKWLMGQ.js";function F(n,i){if(typeof n=="function")return n(i);n!=null&&(n.current=i)}function Z(...n){return i=>{let e=!1;const l=n.map(u=>{const r=F(u,i);return!e&&typeof r=="function"&&(e=!0),r});if(e)return()=>{for(let u=0;u<l.length;u++){const r=l[u];typeof r=="function"?r():F(n[u],null)}}}}function O(...n){return t.useCallback(Z(...n),n)}class ee extends t.Component{getSnapshotBeforeUpdate(i){const e=this.props.childRef.current;if(e&&i.isPresent&&!this.props.isPresent){const l=e.offsetParent,u=_(l)&&l.offsetWidth||0,r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft,r.right=u-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function te({children:n,isPresent:i,anchorX:e,root:l}){const u=t.useId(),r=t.useRef(null),v=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:E}=t.useContext(X),w=O(r,n?.ref);return t.useInsertionEffect(()=>{const{width:f,height:x,top:a,left:h,right:C}=v.current;if(i||!r.current||!f||!x)return;const g=e==="left"?`left: ${h}`:`right: ${C}`;r.current.dataset.motionPopId=u;const p=document.createElement("style");E&&(p.nonce=E);const S=l??document.head;return S.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${x}px !important;
            ${g}px !important;
            top: ${a}px !important;
          }
        `),()=>{S.contains(p)&&S.removeChild(p)}},[i]),R.jsx(ee,{isPresent:i,childRef:r,sizeRef:v,children:t.cloneElement(n,{ref:w})})}const ne=({children:n,initial:i,isPresent:e,onExitComplete:l,custom:u,presenceAffectsLayout:r,mode:v,anchorX:E,root:w})=>{const f=U(se),x=t.useId();let a=!0,h=t.useMemo(()=>(a=!1,{id:x,initial:i,isPresent:e,custom:u,onExitComplete:C=>{f.set(C,!0);for(const g of f.values())if(!g)return;l&&l()},register:C=>(f.set(C,!1),()=>f.delete(C))}),[e,f,l]);return r&&a&&(h={...h}),t.useMemo(()=>{f.forEach((C,g)=>f.set(g,!1))},[e]),t.useEffect(()=>{!e&&!f.size&&l&&l()},[e]),v==="popLayout"&&(n=R.jsx(te,{isPresent:e,anchorX:E,root:w,children:n})),R.jsx(q.Provider,{value:h,children:n})};function se(){return new Map}const L=n=>n.key||"";function K(n){const i=[];return t.Children.forEach(n,e=>{t.isValidElement(e)&&i.push(e)}),i}const re=({children:n,custom:i,initial:e=!0,onExitComplete:l,presenceAffectsLayout:u=!0,mode:r="sync",propagate:v=!1,anchorX:E="left",root:w})=>{const[f,x]=J(v),a=t.useMemo(()=>K(n),[n]),h=v&&!f?[]:a.map(L),C=t.useRef(!0),g=t.useRef(a),p=U(()=>new Map),[S,z]=t.useState(a),[j,k]=t.useState(a);Q(()=>{C.current=!1,g.current=a;for(let M=0;M<j.length;M++){const d=L(j[M]);h.includes(d)?p.delete(d):p.get(d)!==!0&&p.set(d,!1)}},[j,h.length,h.join("-")]);const o=[];if(a!==S){let M=[...a];for(let d=0;d<j.length;d++){const P=j[d],I=L(P);h.includes(I)||(M.splice(d,0,P),o.push(P))}return r==="wait"&&o.length&&(M=o),k(K(M)),z(a),null}const{forceRender:D}=t.useContext(Y);return R.jsx(R.Fragment,{children:j.map(M=>{const d=L(M),P=v&&!f?!1:a===j||h.includes(d),I=()=>{if(p.has(d))p.set(d,!0);else return;let b=!0;p.forEach(N=>{N||(b=!1)}),b&&(D?.(),k(g.current),v&&x?.(),l&&l())};return R.jsx(ne,{isPresent:P,initial:!C.current||e?void 0:!1,custom:i,presenceAffectsLayout:u,mode:r,root:w,onExitComplete:P?void 0:I,anchorX:E,children:M},d)})})};function $(...n){return n.filter(Boolean).join(" ")}const oe=t.forwardRef((n,i)=>{const{texts:e,transition:l={type:"spring",damping:25,stiffness:300},initial:u={y:"100%",opacity:0},animate:r={y:0,opacity:1},exit:v={y:"-120%",opacity:0},animatePresenceMode:E="wait",animatePresenceInitial:w=!1,rotationInterval:f=2e3,staggerDuration:x=0,staggerFrom:a="first",loop:h=!0,auto:C=!0,splitBy:g="characters",onNext:p,mainClassName:S,splitLevelClassName:z,elementLevelClassName:j,...k}=n,[o,D]=t.useState(0),M=s=>{if(typeof Intl<"u"&&Intl.Segmenter){const c=new Intl.Segmenter("en",{granularity:"grapheme"});return Array.from(c.segment(s),m=>m.segment)}return Array.from(s)},d=t.useMemo(()=>{const s=e[o];if(g==="characters"){const c=s.split(" ");return c.map((m,y)=>({characters:M(m),needsSpace:y!==c.length-1}))}return g==="words"?s.split(" ").map((c,m,y)=>({characters:[c],needsSpace:m!==y.length-1})):g==="lines"?s.split(`
`).map((c,m,y)=>({characters:[c],needsSpace:m!==y.length-1})):s.split(g).map((c,m,y)=>({characters:[c],needsSpace:m!==y.length-1}))},[e,o,g]),P=t.useCallback((s,c)=>{const m=c;if(a==="first")return s*x;if(a==="last")return(m-1-s)*x;if(a==="center"){const y=Math.floor(m/2);return Math.abs(y-s)*x}if(a==="random"){const y=Math.floor(Math.random()*m);return Math.abs(y-s)*x}return Math.abs(a-s)*x},[a,x]),I=t.useCallback(s=>{D(s),p&&p(s)},[p]),b=t.useCallback(()=>{const s=o===e.length-1?h?0:o:o+1;s!==o&&I(s)},[o,e.length,h,I]),N=t.useCallback(()=>{const s=o===0?h?e.length-1:o:o-1;s!==o&&I(s)},[o,e.length,h,I]),H=t.useCallback(s=>{const c=Math.max(0,Math.min(s,e.length-1));c!==o&&I(c)},[e.length,o,I]),W=t.useCallback(()=>{o!==0&&I(0)},[o,I]);return t.useImperativeHandle(i,()=>({next:b,previous:N,jumpTo:H,reset:W}),[b,N,H,W]),t.useEffect(()=>{if(!C)return;const s=setInterval(b,f);return()=>clearInterval(s)},[b,f,C]),R.jsxs(B.span,{className:$("text-rotate",S),...k,layout:!0,transition:l,children:[R.jsx("span",{className:"text-rotate-sr-only",children:e[o]}),R.jsx(re,{mode:E,initial:w,children:R.jsx(B.span,{className:$(g==="lines"?"text-rotate-lines":"text-rotate"),layout:!0,"aria-hidden":"true",children:d.map((s,c,m)=>{const y=m.slice(0,c).reduce((A,T)=>A+T.characters.length,0);return R.jsxs("span",{className:$("text-rotate-word",z),children:[s.characters.map((A,T)=>R.jsx(B.span,{initial:u,animate:r,exit:v,transition:{...l,delay:P(y+T,m.reduce((G,V)=>G+V.characters.length,0))},className:$("text-rotate-element",j),children:A},T)),s.needsSpace&&R.jsx("span",{className:"text-rotate-space",children:" "})]},c)})},o)})]})});oe.displayName="RotatingText";export{oe as default};
